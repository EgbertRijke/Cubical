\documentclass{article}

\input{preamble-articles}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Notes on cubical sets}
\author{Egbert Rijke}
\date{\today}

\newcommand{\cub}{\mathbf{C}}
\newcommand{\scub}{\mathbf{C}\sigma}
\newcommand{\ccub}{\mathbf{cub}}
\newcommand{\CSet}{\mathbf{Set}^{\cub^{op}}}
\newcommand{\cSet}{\mathbf{Set}^{\ccub^{op}}}

\begin{document}
\maketitle

\tableofcontents

Steve has a new treatment of box-filling. There's a very tight connection
between the box-filling condition and the rules for the identity types.

\begin{defn}
The cube category $\cub$ has
\begin{enumerate}
\item The objects are $I^n:=\{\pairr{\delta_1,\ldots,\delta_n}|\delta_i\in\{0,1\}\}$
where $I^0=\{\ast\}$.
\item The arrows $f:I^n\to I^k$ are composits of the generating functions. The
generating functions are
\begin{description}
\item[Face inclusions] of the form $e_n^{i,k}:I^n\to I^{n+1}$ for $i=0,1$ and $k=1\ldots,n+1$
given by $\pairr{\delta_1,\ldots,\delta_n}\mapsto\pairr{\delta_1,\ldots,i,\ldots,\delta_n}$
where $i$ is inserted at the $k$-th position.
\item[Projections] of the form $p_n^k:I^{n+1}\to I^n$ given by trashing the
$k$-th coefficient.
\end{description}
\end{enumerate}
\end{defn}

\begin{lem}
For any $f:I^n\to I^k$ there is a factorization $f=e\circ p$
\begin{tikzcd}
I^n \arrow[rr,"f"] \arrow[dr,"p"] & & I^k\\
& I^m \arrow[ur,"e"]
\end{tikzcd}
where $p$ is a composite of projections and $e$ is a composit of face inclusions.
\end{lem}

\begin{lem}
$\cub$ is the free strict monoidal category on an interval:
\begin{equation*}
\begin{tikzcd}
I^0 \arrow[yshift=.7ex,r,"\top"] \arrow[yshift=-.7ex,r,"\bot"] & I^1 \arrow[r,"!"] & I^0,
\end{tikzcd}
\end{equation*}
where $!\circ\top=!\circ\bot$. It is not symmetric
\end{lem}

\begin{lem}
It follows that $I^n=I\otimes\cdots\otimes I$, where $I^n\otimes I^k=I^{n+k}$.
\end{lem}

\begin{defn}
The category of cubical sets is $\CSet$. 
\end{defn}

Issue: we have $y:\cub\to\CSet$ and define $\mathbb{I}^n=y(I^n)$ to be the
standard $n$-cubes. We want
\begin{equation*}
\mathbb{I}^{n+1}=\mathbb{I}^n\times\mathbb{I},
\end{equation*}
where the product is the ordinary cartesian product. Unfortunately, this is
\emph{not the case}. The yoneda embedding doesn't take the tensor product to
the cartesian product (there's no reason why it should). Thus, the tensor
product is out of sync with the geometric intuition which we have with cubes.

BCH used the following category of symmetric cubes, using a dual presentation of it,
to address this issue.
\begin{defn}
The symmetric cube category $C\sigma$ has the same objects as $\cub$, but we
add the permutations $I^n\to I^n$ to the generating arrows. 
\end{defn}

$\scub^{op}=\mathbb{B}_i$ consists of bipointed sets with partial injections.
The objects are $[n]=\{\bot,x_1,\ldots,x_n,\top\}$ and the maps
$f:[n]\to[m]$ bipointed and partial injective. Consider $\{m\}:=[m]\setminus\{\bot,\top\}$.
Then
\begin{equation*}
\begin{tikzcd}
{[m]} \arrow[r,"f"] & {[n]}\\
\{m\} \arrow[u] \arrow[ur,swap,"f|_{(f^{-1}(\{\bot,\top\}))^c}"]
\end{tikzcd}
\end{equation*}
where $f^{-1}(\{\bot,\top\})$ has to be injective. Steve will use a similar
description but without the condition of injectivity.

\begin{lem}
$\scub$ is the free symmetric monoidal category on an interval.
\end{lem}

\begin{defn}
The cartesian cube category $\ccub$ is defined to be the category with the
same objects as $\cub$, and the arrows are generated by the face inclusions,
projections, permutations and diagonal maps. The diagonal maps
$d_n^k:I^n\to I^{n+1}$ given by $\pairr{\delta_1,\ldots,\delta_n}
\mapsto\pairr{\delta_1,\ldots,\delta_k,\delta_k,\ldots,\delta_n}$, doubling
the $k$-th index.
\end{defn}

Instead of the faces, projections, spinning the cube around, we can now also
include a cube diagonally into a cube of the next dimension.

\begin{lem}
Any $f:I^n\to I^k$ factors as follows:
\begin{equation*}
\begin{tikzcd}
I^n \arrow[rr,"f"] \ar[d,"p"] & & I^k\\
I^m \arrow[r,"\delta"] & I^{m+j} \arrow[r,"\sigma"] & I^{m+j} \arrow[u,"e"]
\end{tikzcd}
\end{equation*}
where $p$ is a...
\end{lem}

The cube category fixes the problem of the gap between the tensor product and
the cartesian product in the cubical sets.

\begin{lem}
$\ccub$ is the free f.p. category on an interval.
\begin{equation*}
\end{equation*}
Every object is a cartesian product of $I$. $I^0=1$, the terminal object.
\end{lem}

There are two alternative presentations of $\ccub$. 

\begin{enumerate}
\item As an algebraic theory of two distinguished constants $\bot$ and $\top$. There
are no equations, so it's a very simple algebraic theory. Thus, there is a
classifying category $C(\mathbb{T})$. 

It has as objects are contexts of variables: $[x_1,\ldots,x_n]$.
It has as arrows $f:[x_1,\ldots,x_n]\to[x_1,\ldots,x_m]$. Think of
$[x_1,\ldots,x_m]$ as $[x_1]\times\cdots\times[x_1]$. So $f$ is described by
$(f_i:[x_1,\ldots,x_n]\to[x_1])^m_{i+1}$ where each $f_i:[x_1,\ldots,x_n]\to[x_1]$
is a term in context $x_1,\ldots,x_n$, which could be among $x_1,\ldots,x_n,\bot,\top$.
This corresponds exactly with the description of BCH without injectivity.
\item By Lawvere duality whenever you have an algebraic theory $\mathbb{T}$, then
when you make the classifying category out of it, that is equivalent to the
category $(\mathbb{T}-Alg_{fin.gen.free})^{op}$.

In our case, a free algebra is just a bipointed set with distinct points.
$([n]\to [m])^{op}$ consists of 

\begin{lem}
$\ccub$ is dual to the category $\mathbb{B}^{op}$, where $\mathbb{B}$ is the
finite strictly bipointed sets (so $\bot\neq\top$).
\end{lem}
\end{enumerate}

\begin{equation*}
\begin{tikzcd}
\mathbf{Set}^{\ccub^{op}} \arrow[r,"\simeq"] & \mathbf{Set}^{\mathbb{B}}
\\
\ccub \arrow[u,"y"]
\end{tikzcd}
\end{equation*}
Now we compute:
\begin{align*}
\mathbb{I}^n & = y(I^n) \\
& = y(I\times\cdots \times I)\\
& = y(I)\times\cdots\times y(I)\\
& = \mathbb{I}\times\cdots\times\mathbb{I}
\end{align*}
Note that the tensor product in $\ccub$ becomes the cartesian product, which
is an essential point.

At this point, the question which arises is "what does this topos classify?".

\begin{lem}
$\mathbf{Set}^{\ccub^{op}}$ is a classifying topos for the geometric theory
of strict intervals (i.e. strict bipointed objects). 

A bipointed object is an object with two points $1\rightrightarrows A$. The
classifying topos is the free finite limit category $\mathbf{Set}^{\ccub^{op}_{=}}$.

Now we consider the geometric theory with $\bot=\top\vdash\mathrm{false}$. 
So
\begin{equation*}
\mathbf{Set}^{\ccub^{op}}\simeq Sh([\bot=\top]^c)\subseteq \mathbf{Set}^{\ccub^{op}_{=}}
\end{equation*}
\end{lem}

There are two more possibilities for the cubical sets around in the literature.

\begin{enumerate}
\item[connections] It's a different way of fixing the problem of tensor products
being different from cartesian products. In the cases of interest in homotopy
theory, the particular cubical sets have the box filling condition. There the
connections can be defined. 
\end{enumerate}

\begin{lem}
Joyal asserted in private communication with Steve that $\ccub$ is a test category,
i.e. rendering the homotopy theory of cubical sets equivalent to that of topology.
\end{lem}

The category $\cSet$ has nice path objects. Given $A$, we consider $A^\mathbb{I}$
and write $A(n)$ for $A(I^n)$.
\begin{align*}
A^{\mathbb{I}}(n) & = \mathrm{hom}(y(I^n),A^\mathbb{I})\\
& = \mathrm{hom}(y(I^n)\times y(I),A)\\
& = \mathrm{hom}(y(I^{n+1}),A)\\
& = A(n+1).
\end{align*}
Thus, $\cSet$ has a very canonical choice of path objects. The operation of
$A\mapsto A^\mathbb{I}$ is well-behaved. It has a right-adjoint (we already
know that it has a left adjoint). This doesn't
hold in general for Quillen categories. It tells us that it preserves all
colimits. In particular, the path space of a quotient is a quotient of path
spaces.
\begin{align*}
\mathbb{I}^\mathbb{I}(n) & = \mathbb{I}(n+1)\\
& = \mathrm{hom}_{\ccub}(I^{n+1},I)\\
& = \mathrm{hom}_\mathbb{B}([1],[n+1])\\
& = \mathrm{hom}_\mathbb{F}(\{\ast\},\{\bot,x_1,\ldots,x_{n+1},\top\})\\
& = n+3\\
& = (n+2)+1\\
& = \mathrm{hom}_\mathbb{B}([1],[n])+\mathrm{hom}_\mathbb{B}([0],[n])\\
& = \mathrm{hom}_{\ccub}(I^n,\mathbb{I})+\mathrm{hom}_{\ccub}(I^n,1)\\
& = \mathrm{hom}_\ccub(I^n,\mathbb{I}+1)\\
& = (\mathbb{I}+1)(n).
\end{align*}
So we have $\mathbb{I}^\mathbb{I}\simeq\mathbb{I}+1$. Now write 
$X\mapsto X_\mathbb{I}$ for the right adjoint of $A\mapsto A^\mathbb{I}$. Then
we have
\begin{align*}
X_\mathbb{I}(n) & = \mathrm{hom}(I^n,X_\mathbb{I})\\
& = \mathrm{hom}(y(I^n)^\mathbb{I}, X)\\
& = \mathrm{hom}(y(I)^{n\times \mathbb{I}},X)\\
& = \mathrm{hom}((\mathbb{I}^\mathbb{I})^n,X)\\
& = \mathrm{hom}((\mathbb{I}+1)^n,X)\\
& = \mathrm{hom}(\mathbb{I}^n+\cdots+\mathbb{I}+1,X)\\
& = \mathrm{hom}(\mathbb{I}^n,X)\times\cdots\times\mathrm{hom}(1,X)\\
& = X(n)\times\cdots\times X(0).
\end{align*}
where there are of course binomial coefficients everywhere.

$\cSet$ is a locally cartesian closed category. We have $\Pi$, $\Sigma$,...

In $\cSet$, we have $A^\mathbb{I}$, we want to use these to model identity
types.

Question, how can we use $A^\mathbb{I}=\mathrm{Id}_A$? Need to consider: what
are the types; what are the dependent types?

\begin{lem}
For every type $X$ in MLTT with identity types (no function extensionality, or
eta-rules, certainly no univalence), there's an associated cubical set
$|X|\in\mathbf{CSet}$ which is Kan (cubical Lumsdaine-van den Berg-Garner).
\end{lem}

\end{document}
